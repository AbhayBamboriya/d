<%- include('../partials/head') %>
</head>
<body class="bg-gray-100">

  <%- include('../partials/nav') %>

  <main class="max-w-xl mx-auto mt-10 p-8 bg-white rounded-xl shadow-md">
    <h1 class="text-3xl font-bold text-center text-red-600 mb-6">Welcome to the Attendance System</h1>

<% if (loginMessage) { %>
  <div id="login-popup" class="fixed top-5 right-5 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg z-50 animate-fade-in-down font-bold">
    <strong class="font-bold">Success:</strong>
    <span class="ml-2"><%= loginMessage %></span>
  </div>

  <script>
    setTimeout(() => {
      const popup = document.getElementById('login-popup');
      if (popup) popup.remove();
    }, 3000); // Auto-close after 3 seconds
  </script>

  <style>
    @keyframes fade-in-down {
      from { opacity: 0; transform: translateY(-10px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in-down {
      animation: fade-in-down 0.4s ease-out;
    }
  </style>
<% } %>

    <% if (user) { %>
      <div class="bg-green-100 border border-green-400 text-green-700 px-6 py-4 rounded mb-4">
        <strong class="font-semibold">Logged in as:</strong>
        <ul class="list-disc list-inside mt-2">
          <li><strong>Name:</strong> <%= user.firstName %></li>
          <li><strong>Last Name:</strong> <%= user.lastName %></li>
          <li><strong>Email:</strong> <%= user.email %></li>
          <li><strong>UserType:</strong> <%= user.userType %></li>
        </ul>
      </div>

      <form action="/logout" method="POST">
      <button class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded shadow">
        Logout
      </button>
      </form>

    <% } else { %>
      <div class="text-center text-gray-600">
        <p>Please <a href="/login" class="text-blue-600 hover:underline">login</a> to continue.</p>
      </div>
    <% } %>
  </main>

</body>
</html>
